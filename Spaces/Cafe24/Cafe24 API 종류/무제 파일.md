
api를  홈페이지로 하는듯

### API Diagram
리소스 관계를 다이어그램으로 제공하여, 전체적인 카페24 API 체계를 확인할 수 있습니다.

![[Pasted image 20240830100730.png]]


API 요청과 응답은 JSON Format을 지원

조회 요청

```java
Request request = new Request.Builder()
  .url("https://{mallid}.cafe24api.com/{endpoint_url}")
  .addHeader("Authorization", "Bearer {access_token}")
  .addHeader("Content-Type", "application/json")
  .addHeader("X-Cafe24-Api-Version", "{version}")
  .get()
  .build();
  
OkHttpClient client = new OkHttpClient();
Response response = client.newCall(request).execute();
```



등록/수정 요청
```java
MediaType mediaType = MediaType.parse("");
RequestBody body = RequestBody.create(mediaType, "{ .... }");
Request request = new Request.Builder()
  .url("https://{mallid}.cafe24api.com/{endpoint_url}")
  .addHeader("Authorization", "Bearer {access_token}")
  .addHeader("Content-Type", "application/json")
  .addHeader("X-Cafe24-Api-Version", "{version}")
  .post(body)
  .build();
  
OkHttpClient client = new OkHttpClient();
Response response = client.newCall(request).execute();
```



정상 응답


```
{
  "resource": {
      "key": "value",
      "key": "value"
   }
}
```


에러 응답 

```
{
  "error": {
      "code": "error code",
      "message": "error message",
      "more_info": {
      }
  }
}
```



### API Status Code

|Code|발생하는 사례|오류 해결 방법|
|---|---|---|
|200|GET 성공, PUT 성공, DELETE 성공시||
|201|POST 성공시||
|207|다중 요청 등록시 상태가 객체별로 다른 경우|오류 상태를 객체별로 확인하여 해당 상태에 따라 대응합니다.|
|400|서버에서 요청을 이해할 수 없음  <br>1) Content-Type이 잘못 지정되어있음  <br>2) application/type이 json이 아님|요청시 "Content-Type"이 application/json으로 되어있는지 확인합니다.|
|400|요청 API URL에 한글 또는 특수문자를 인코딩하지 않고 그대로 사용한 경우|요청 API URL에 한글 또는 특수문자를 URL 인코딩하였는지 확인합니다.|
|401|1) Access Token 없이 호출한 경우  <br>2) Access Token이 유효하지 않은 경우  <br>3) Access Token이 만료된 경우  <br>4) 알 수 없는 클라이언트일 경우|유효한 발급 절차에 따라 발급받은 Access Token을 사용하였는지 확인합니다.|
|401|Front API 사용시 client_id를 미입력한 경우|유효한 클라이언트 ID를 사용하였는지 확인합니다.|
|403|1) Access Token은 있으나 해당 Scope에 권한이 없음  <br>2) Front API에서 볼 수 있는 권한이 없을 경우|API를 호출할 수 있는 권한이 있는지 API의 Scope 또는 쇼핑몰의 설정을 확인합니다.|
|403|https 프로토콜이 아닌 경우|API 요청시 https 로 요청하였는지 확인합니다.|
|403|뉴상품 쇼핑몰이 아닌 경우|쇼핑몰이 (뉴)상품관리로 업그레이드 되어야 사용 가능합니다.|
|403|(Admin API 호출시) 쇼핑몰에서 해당 앱이 삭제된 경우|쇼핑몰에 앱이 설치되었는지 확인 후 앱을 다시 설치합니다.|
|403|(Front API 호출시) 쇼핑몰에서 해당 앱이 삭제된 경우|쇼핑몰에 앱이 설치되었는지 확인 후 앱을 다시 설치합니다.|
|404|1) API URL을 잘못 호출한 경우  <br>2) 리소스를 찾을 수 없을 경우  <br>3) {#id}가 없는 경우|엔드포인트 URL의 오류가 있는지 API 문서를 참고하여 확인합니다.|
|409|동일 리소스에 동일 내용을 업데이트할 경우|수정할 데이터를 요청해주세요.|
|422|조회/처리 요청시 값이 정해진 스펙과 다를 경우  <br>1) 필수 파라메터 누락함  <br>2) 정해진 스펙과 다를 경우|API 문서를 참고하여 필수 파라메터가 입력되지 않았거나 유효하지 않은 값을 입력하였는지 확인합니다.|
|429|클라이언트의 API 요청이 Bucket을 초과한 경우|API 최대 허용 요청 건수를 초과하지 않도록 잠시 후 다시 요청합니다.|
|500|내부 서버 에러, 알 수 없는 에러|일시적으로 에러가 발생하였습니다. 잠시 후에 다시 시도합니다.|
|503|현재 서버가 다운된 경우|개발자센터로 문의해주세요.|
|503|서버가 다운된 경우. API를 사용할 수 없음.|개발자센터로 문의해주세요.|
|504|요청 시간이 초과된 경우(Timeout)|일시적으로 에러가 발생하여 응답이 지연되고 있습니다. 잠시 후에 다시 시도해주세요.|


## ### GET API  조회 하는법


#### 1. 검색조건 추가

```
예) 특정 브랜드 내에서 상품 판매가가 1000원 이상인 상품 조회
GET https://{mallid}.cafe24api.com/api/v2/products?brand_code=B000000A&price_min=1000

예) 상품 등록일 범위를 지정하여 상품 조회
GET https://{mallid}.cafe24api.com/api/v2/products?created_start_date=2018-01-03&created_end_date=2018-02-03

예) 상품 수정일 범위를 지정하여 상품 조회
GET https://{mallid}.cafe24api.com/api/v2/products?updated_start_date=2018-01-03T14:01:26+09:00&updated_end_date=2018-02-03T14:01:26+09:00
```

검색조건은 엔드포인트에 파라메터를 추가하여 검색할 수 있습니다.

여러 조건을 같이 검색할 경우 "&" 구분자를 이용하여 검색 조건을 추가할 수 있습니다.

API에서 지원하는 경우, 타임존을 사용하여 날짜와 시간 검색을 할 수 있습니다.


#### 2. 콤마로 여러 건을 검색

API에서 지원하는 경우, 콤마(,)를 사용하여 여러 값을 동시에 검색할 수 있습니다. (단, 100개 항목 이하로 입력 해주세요.)

콤마(,)로 추가한 검색 조건은 OR 조건으로, 검색 조건에 해당되는 모든 값들이 검색됩니다.


```
예) 특정 상품번호를 지정하여 상품 조회
GET https://{mallid}.cafe24api.com/api/v2/products?product_no=11,12,13

예) 특정 상품번호와 상품코드를 지정하여 상품 조회
GET https://{mallid}.cafe24api.com/api/v2/products?product_no=11,12,13&product_code=P000000X,P000000W
```


#### 3. 멀티쇼핑몰 정보 조회

특정 멀티쇼핑몰 번호를 명시하면 해당 멀티쇼핑몰의 정보를 조회할 수 있습니다.

멀티쇼핑몰 번호를 명시하지 않을 경우, 기본 쇼핑몰의 정보를 조회합니다.


```
예) 특정 멀티쇼핑몰의 상품 조회
GET https://{mallid}.cafe24api.com/api/v2/products?shop_no=2
```


#### 5. Pagination

조회 결과가 많을 경우, 정해진 'limit' 기본 값만큼 결과가 조회됩니다.

'limit' 파라메터를 이용하여 조회 건수를 확장할 수 있으며, API마다 정의된 최대 값만큼만 확장할 수 있습니다.

'limit' 최대 값으로 모든 데이터를 조회할 수 없는 경우, 'offset' 파라메터를 사용할 수 있습니다.



```
예) 상품명과 상품번호 항목만 조회
GET https://{mallid}.cafe24api.com/api/v2/admin/products?fields=product_name,product_no
```




---
출처 - https://developers.cafe24.com/docs/ko/api/admin/#api-index