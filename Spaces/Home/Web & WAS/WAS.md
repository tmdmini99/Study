# WAS(Web Application Server)

_**웹 서버 + 웹 컨테이너**_


![[Was1.png]]

WAS는 틀이되는 HTML문서를 기반으로 클라이언트의 요청에 따라, 

실시간으로 HTML문서를 제작해 클라이언트에게 서비스 해줍니다.  

즉, 동적으로 웹페이지를 클라이언트에게 제공할 수 있다는 뜻입니다.

서버에서 HTML 제작을 도와주는 프레임워크와 프로그래밍 언어가 있습니다.

흔히 들어본 JAVA, JSP, Servlet, JAVA Spring, Tomcat 등이 대표적인 예입니다.

**( 이것들을 Web Container라고 하는데 좀 추상적인 개념이라 생략하겠습니다. )**

때문에 이런 작업을 하는 WAS는 일반적인 Web Server에 비해 부하가 더 많이걸리게 됩니다.

또한 프로그래밍 설계도 복잡해 지죠. 

(클라이언트 요청에 따라 필요한 정보를 DB에서 받아와서 특정 HTML문서 위치에 해당 데이터를 삽입하고 등....)

때문에 이런 설계를 모듈화 시켜 패턴을 만든 것이 MVC 모델링입니다.

# Web Server - WAS

WAS의 단점이 복잡하고 Web Server보다 느리다는 점에 있습니다.

  
또한 항상 웹페이지는 동적일 필요가 없으며 정적인 페이지도 필요합니다.

  
때문에 이 둘을 묶어 같이 사용할 수 있습니다.

  
또한 트래픽 처리함에 있어서도 WAS의 갯수를 늘려 분산처리하여 로드벨런싱 또한 가능하게 할 수 있습니다.



![[WAS2.png]]


이렇게 말이죠. 정적인 페이지 요청이 들어오면 Web Server에서 처리하고,

동적인 페이지 요청이 들어오면 Web Server는 해당 정보를 WAS에게 전달하죠.

이런식으로 분산처리를 진행한다면 트래픽을 좀 더 효율적으로 관리할 수 있게 될 것입니다.

하지만 서버가 모듈화 되어 분산의 형태를 띄우게 되면 서버동기화, DB동기화, 세션관리 등...

관리해야할 것들이 늘어나며 관리 측면에서 비용이 굉장히 증가하게 됩니다.

여기서 동기화란? 여러대의 서버의 데이터가 일치해야 한다는 것입니다. A. B. C. D라는 서버가 있는데,

A에 1234데이터가 있다면 B, C, D도 1234의 데이터를 갖고 있어야 합니다.

왜냐하면 여러 클라이언트가 요청 했을 때 동일한 데이터를 받아야 하는데 데이터가 일치하지 않는다면??

신뢰성을 잃겠죠? 정확한 데이터 전달이 목적인데 말이죠....

또한 분산처리 설계방식에 따라 처리하는 데이터가 아예 달라질 수도 있구요.

때문에 이런 것들을 해결하기 위해서 Zookeeper, Hadoop, 세션 클러스터링 등의 프로그램들을 사용하는 것입니다.



- 기본 기능

1) 프로그램 실행 환경과 데이터베이스 접속 기능을 제공한다.

2) 여러 개의 트랜잭션을 관리한다.

3) 업무를 처리하는 비즈니스 로직을 수행한다.

4) Web Service 플랫폼으로서의 역할

![[WAS3.png]]


■ **웹 컨테이너 (Web Container)**

JSP와 서블릿을 실행시킬 수 있는 소프트웨어를 웹 컨테이너 혹은 서블릿 컨테이너라고 한다.

웹 서버에서 JSP를 요청하면 톰캣에서는 JSP파일을 서블릿으로 변환하여 컴파일을 수행하고, 서블릿 수행결과를 웹서버에게 전달하게된다.

JSP컨테이너가 탑재 되어 있는 WAS는 JSP 페이지를 컴파일 해 동적인 페이지를 생성한다.

Servlet 컨테이너, JSP 컨테이너, EJB 컨테이너 등의 종류가 있다. (WebLogic 등)

  

 WEB 과 WAS 의 종류 

  

**■ apache란?**

  

apache란 것은 소프트웨어 단체 이름이다. 

그리고 우리가 흔히 부르는 아파치서버라는 것은 이 재단에서 후원하는 오픈소스 프로젝트 커뮤니티에서 만든 http웹서버를 말한다. 

http 웹서버는 http 요청을 처리할 수 있는 웹서버이고, 아파치 http서버는 http요청을 처리하는 웹서버인 것이다. 

클라이언트가 GET, POST, DELETE 등등의 메소드를 이용해 요청을 하면 이 프로그램이 어떤 결과를 돌려주는 기능을 한다.

즉, 아파치는 웹서버이다.

  

**■ tomcat이란?**

  

tomcat은 흔히 WAS(Web Application Server)라고 말한다.

WAS는 웹서버와 웹 컨테이너의 결합으로 다양한 기능을 컨테이너에 구현하여 다양한 역할을 수행할 수 있는 서버를 말한다.

클라이언트의 요청이 있을 때 내부의 프로그램을 통해 결과를 만들어내고 이것을 다시 클라이언트에 전달해주는 역할을 하는 것이 바로 웹 컨테이너이다.

앞에서 본 아파치 웹 서버와 차이는 이 컨테이너 기능이 가능하냐의 차이가 가장 크다고 생각한다.

  

|   |   |
|---|---|
|WAS|Web Server|
|tomcat, tMax jeus, BEA Web Logic, IBM Webspere, JBOSS,Bluestone, Gemston, inprise, Oracle, PowerTier,Apptivity, silverStream|IIS, apache, tMax, WebtoB|


 WEB 과 WAS 의 비교 


Web Container의 유무로 WEB 과 WAS 를 나눌수 있으며, 

WEB서버는 HTML 문서같은 정적 컨텐츠를 처리하는 것이고 (HTTP 프로토콜을 통해 읽힐 수 있는 문서)

WAS서버는 asp, php, jsp 등 개발 언어를 읽고 처리하여 동적 컨텐츠, 웹 응용 프로그램 서비스를 처리하는 것이다. 

  

**■ 차이점**

  

목적이 다르다.

웹 서버는 정적인 데이터를 처리하는 서버이다. 이미지나 단순 html파일과 같은 리소스를 제공하는 서버를 웹 서버를 통하면 WAS를 이용하는 것보다 빠르고 안정적이다. 

WAS는 동적인 데이터를 처리하는 서버이다. DB와 연결되어 데이터를 주고 받거나 프로그램으로 데이터 조작이 필요한 경우에는 WAS를 활용해야 한다.

우리가 만드는 웹페이지는 정적 컨텐츠와 동적 컨텐츠를 함께 노출하게 한다. WAS가 정적 데이터를 처리하게 되면, 동적 컨텐츠의 처리가 지연이 될 것이고 이로 인한 페이지 노출시간이 늘어나게 된다. WAS는 동적 처리에 최적화 되어 있는 서비스이기 때문에 처리 속도를 위해, 정적처리는 웹서버에서 처리를 하고, 동적 컨텐츠는 WAS에서 처리하게 된다. 


사용자가 클라이언트(브라우저)에 요청을 하게 되면 이를 웹서버에서 반응하여 WAS의 처리를 거쳐 웹 페이지로 다시 웹서버에서 클라이언트(브라우저)에 응답 메시지를 주는 것이다.

  
추가적으로, 

JSP를 배울 때, 대체적으로 Apache와 Tomcat을 사용한다. ASP를 구동하기 위해서는 IIS를 사용한다. ASP의 환경이 MS계열 서비스라면 WAS의 기능을 담당하는 부분이 있어 별도의 WAS가 필요하지 않다.



![[WAS4.png]]


### Static Pages
Web Server는 파일 경로 이름을 받아 경로와 일치하는 file contents를 반환한다.
항상 동일한 페이지를 반환한다.
Ex) image, html, css, javascript 파일과 같이 컴퓨터에 저장되어 있는 파일들
### Dynamic Pages
인자의 내용에 맞게 동적인 contents를 반환한다.
즉, 웹 서버에 의해서 실행되는 프로그램을 통해서 만들어진 결과물 * Servlet: WAS 위에서 돌아가는 Java Program
개발자는 Servlet에 doGet()을 구현한다.




![[WAS5.png]]

### Web Server
Web Server의 개념
소프트웨어와 하드웨어로 구분된다.
1) 하드웨어
Web 서버가 설치되어 있는 컴퓨터
2) 소프트웨어
웹 브라우저 클라이언트로부터 HTTP 요청을 받아 정적인 컨텐츠(.html .jpeg .css 등)를 제공하는 컴퓨터 프로그램
#### Web Server의 기능
HTTP 프로토콜을 기반으로 하여 클라이언트(웹 브라우저 또는 웹 크롤러)의 요청을 서비스 하는 기능을 담당한다.
요청에 따라 아래의 두 가지 기능 중 적절하게 선택하여 수행한다.
기능 1)
정적인 컨텐츠 제공
WAS를 거치지 않고 바로 자원을 제공한다.
기능 2)
- 동적인 컨텐츠 제공을 위한 요청 전달
- 클라이언트의 요청(Request)을 WAS에 보내고, WAS가 처리한 결과를 클라이언트에게 전달(응답, Response)한다.
- 클라이언트는 일반적으로 웹 브라우저를 의미한다.
Web Server의 예
Ex) Apache Server, Nginx, IIS(Windows 전용 Web 서버) 등
### WAS(Web Application Server)
#### WAS의 개념
DB 조회나 다양한 로직 처리를 요구하는 동적인 컨텐츠를 제공하기 위해 만들어진 Application Server
HTTP를 통해 컴퓨터나 장치에 애플리케이션을 수행해주는 미들웨어(소프트웨어 엔진)이다.
“웹 컨테이너(Web Container)” 혹은 “서블릿 컨테이너(Servlet Container)”라고도 불린다.
Container란 JSP, Servlet을 실행시킬 수 있는 소프트웨어를 말한다.
즉, WAS는 JSP, Servlet 구동 환경을 제공한다.
#### WAS의 역할
WAS = Web Server + Web Container
Web Server 기능들을 구조적으로 분리하여 처리하고자하는 목적으로 제시되었다.
분산 트랜잭션, 보안, 메시징, 쓰레드 처리 등의 기능을 처리하는 분산 환경에서 사용된다.
주로 DB 서버와 같이 수행된다.
현재는 WAS가 가지고 있는 Web Server도 정적인 컨텐츠를 처리하는 데 있어서 성능상 큰 차이가 없다.
#### WAS의 주요 기능
- 프로그램 실행 환경과 DB 접속 기능 제공
- 여러 개의 트랜잭션(논리적인 작업 단위) 관리 기능
- 업무를 처리하는 비즈니스 로직 수행
#### WAS의 예
Ex) Tomcat, JBoss, Jeus, Web Sphere 등
Web Server와 WAS를 구분하는 이유







  
 Web Server와 WAS의 구성에 따른 분류 

■ **WAS와 WebServer를 분리하지 않는 경우**  

모든 컨텐츠를 한곳에 집중시켜 웹서버와 WAS의 역할을 동시에 수행, 

스위치를 통한 로드 밸러싱, 사용자가 적을 경우 효율적

■ **WAS와 WebServer를 분리한 경우** 

웹서버와 WAS의 기능적 분류를 통해 효과적인 분산을 유도,

정적인 데이터는 웹서버에서 처리, 동적인 데이터는 WAS가 처리

■ **WAS 여러개와 WebServer를 분리한 경우**

WAS단을 프리젠테이션 로직와 비즈니스 로직으로 구분하여 구성, 

특정 logic의 부하에 따라 적절한 대응할 수 있지만 설계단

계 유지보수 단계가 복잡해 질 수가 있다. 

  
■ **WAS와 WebServer를 분리하는 이유**

1) 기능을 분리하여 서버의 부하방지

2) 물리적으로 분리하여 보안강화

3) 열러대의 WAS를 연결 가능(로드밸런싱의 역할 및 fail over, fail back 처리에 유리)

4) 여러 웹어플리케이션을 서비스 가능(java서버, c#서버, php서버 등 하나의 웹서비스를 통해 서비스 가능)





핵심은, **WAS가 멀티 스레드를 지원**한다는 것이다. 멀티스레드에 대한 부분은 WAS가 처리해준다. 즉, 개발자가 멀티스레드 관련 코드를 신경 쓰지 않아도 된다는 것이다. 마치 싱글스레드 프로그래밍을 하듯이 편하게 소스 코드를 개발하기만 하면 된다.


---
참조 - https://hwan-shell.tistory.com/288
https://trillium.tistory.com/69


https://huisam.tistory.com/entry/spring-introduce


https://escapefromcoding.tistory.com/732