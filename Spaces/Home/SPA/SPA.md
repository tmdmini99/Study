### ì§§ì€ ìš”ì•½

- SPAëŠ” í•˜ë‚˜ì˜ í˜ì´ì§€ë¡œ ì´ë£¨ì–´ì§„ ì›¹ì´ê³  MPAëŠ” ì—¬ëŸ¬ í˜ì´ì§€ë¡œ ì´ë£¨ì–´ì§„ ì›¹ì´ë‹¤.
- ì´ˆê¸° ë¡œë”©ì€ MPAê°€ ë¹ ë¥´ê³  ê·¸ í›„ì˜ í˜ì´ì§€ ì „í™˜ì€ SPAê°€ ë¹ ë¥´ë‹¤.
- SEOì—ëŠ” 'SSR ë°©ì‹ìœ¼ë¡œ ë™ì‘í•˜ëŠ”' MPAê°€ ë” ìœ ë¦¬í•˜ë‹¤.


# SPAì˜ ë“±ì¥ ë°°ê²½ - MPA

ì „í†µì ìœ¼ë¡œ ì›¹ ë¸Œë¼ìš°ì €ëŠ” ì„œë²„ë¥¼ í˜¸ì¶œí•  ë•Œë§ˆë‹¤ ìƒˆ HTML í˜ì´ì§€ë¥¼ ì‘ë‹µë°›ìŠµë‹ˆë‹¤. ì¦‰ í˜ì´ì§€ê°€ ì—¬ëŸ¬ê°œë¼ëŠ” ëœ»ì´ì£ . í˜ì´ì§€ê°€ ì—¬ëŸ¬ê°œë‹ˆê¹Œ ì—¬ëŸ¬ HTML íŒŒì¼ì´ ìˆê³  ìƒˆë¡œìš´ í˜ì´ì§€ë¥¼ ì„œë²„ì— ìš”ì²­(request)í•  ë•Œë§ˆë‹¤ ì •ì  ë¦¬ì†ŒìŠ¤ê°€ ë‹¤ìš´ë¡œë“œ ë˜ê³ (response), ê·¸ì— ë§ì¶°Â `ë‹¤ì‹œ ì „ì²´ í˜ì´ì§€ë¥¼ ë Œë”ë§`í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.

ì´ëŸ¬í•œ ì „í†µì ì¸ ë°©ì‹ì€ ì—¬ëŸ¬ ê°œì˜(Multiple) í˜ì´ì§€ë¡œ(Page) ì´ë£¨ì–´ì§„ ì›¹ì•±(Application)ì´ë¼ê³  í•´ì„œÂ `MPA`Â (Multiple Page Application)ë°©ì‹ì´ë¼ê³  ë¶ˆë ¸ìŠµë‹ˆë‹¤.

> #### ì •ì  ë¦¬ì†ŒìŠ¤ë€ ë¬´ì—‡ì¸ê°€ìš”?
> 
> ì •ì  ë¦¬ì†ŒìŠ¤ëŠ” ì„œë²„ ì»´í“¨í„° ë‚´ì— ì €ì¥ë˜ì–´ ìˆëŠ” HTML, CSS, JavaScript, ì´ë¯¸ì§€, ì˜ìƒ ë“±ì„ ë§í•©ë‹ˆë‹¤. í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ê°„ ìƒí˜¸ì‘ìš©ì„ í†µí•´ ì •ë³´ ë° ìë£Œê°€ ìƒì„±ë˜ëŠ” ê²Œ ì•„ë‹ˆë¼, ë‹¨ìˆœíˆÂ `ì„œë²„ì— ì¡´ì¬í•˜ëŠ” íŒŒì¼`ì´ê¸° ë•Œë¬¸ì— â€˜ì •ì ' ë¦¬ì†ŒìŠ¤ë¼ëŠ” ìš©ì–´ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

---

## MPAì˜ ë‹¨ì 

ê·¼ë° í˜ì´ì§€ê°€ ë°”ë€” ë•Œë§ˆë‹¤ ë§¤ë²ˆ ì™„ì „í•œ í˜ì´ì§€ë¥¼ ì‘ë‹µë°›ì•„ì•¼ í•´ì„œ í•„ìš”í•œ ë¶€ë¶„ë§Œ ì‘ë‹µë°›ëŠ” ë°©ì‹ì— ë¹„í•´ íš¨ìœ¨ì´ ë–¨ì–´ì§‘ë‹ˆë‹¤. í˜ì´ì§€ ì´ë™ ì‹œÂ `ë¶ˆí•„ìš”í•œ ë¡œë”©`ì„ ë‹¤ì‹œ í•˜ê¸° ë•Œë¬¸ì— ì„œë²„ ë Œë”ë§ì— ë”°ë¥¸ ë¶€í•˜ê°€ ì¡´ì¬í•˜ëŠ” ê²ƒì´ì£ . ì¦‰ ì„±ëŠ¥ìƒì— ë¬¸ì œê°€ ìˆëŠ” ê²ƒì…ë‹ˆë‹¤.

ë§ˆì°¬ê°€ì§€ë¡œ ì „ì²´ í˜ì´ì§€ë¥¼ ë‹¤ì‹œ ë¡œë”©í•˜ë‹ˆê¹Œ ë‹¤ë¥¸ í˜ì´ì§€ë¡œ ë„˜ì–´ê°€ê±°ë‚˜ ìƒˆë¡œê³ ì¹¨ì„ í•˜ë©´ í™”ë©´ì´ ê¹œë¹¡ì…ë‹ˆë‹¤. ì´ëŠ” ê³§Â `ì•ˆ ì¢‹ì€ ì‚¬ìš©ì ê²½í—˜`ì„ ì´ˆë˜í•˜ê²Œ ë©ë‹ˆë‹¤.

í˜ì´ì§€ ê·œëª¨ê°€ ì‘ìœ¼ë©´ ê´œì°®ì§€ë§Œ, ë°ìŠ¤í¬íƒ‘ ë¸Œë¼ìš°ì €ì— ë¹„í•´ ì„±ëŠ¥ì´ ë–¨ì–´ì§€ëŠ” ëª¨ë°”ì¼ ê¸°ê¸°ê°€ ìƒˆë¡­ê²Œ ë“±ì¥í•˜ë©´ì„œ ì´ëŸ° MPA ë°©ì‹ì€Â `ëª¨ë°”ì¼ í™˜ê²½ì—ì„œ í° ë¶€ë‹´`ì„ ì£¼ê²Œ ë©ë‹ˆë‹¤.

---

# SPAì˜ ë“±ì¥

MPAì˜ ì„±ëŠ¥ìƒì˜ ë¬¸ì œì™€ ë‚˜ìœ ì‚¬ìš©ì ê²½í—˜ì„ ê°œì„ í•˜ê¸° ìœ„í•´ SPAë¼ëŠ” ìƒˆë¡œìš´ ë°©ì‹ì´ ë“±ì¥í•©ë‹ˆë‹¤. ë‹¨ì¼(Single) HTML í˜ì´ì§€(Page)ë¥¼ ë¡œë“œí•˜ê³  ì‚¬ìš©ìê°€ ì•±ê³¼ ìƒí˜¸ ì‘ìš©í•  ë•Œ í•´ë‹¹ í˜ì´ì§€ë¥¼Â `ë™ì `ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ëŠ” ì›¹ì•±(Application)ì„ ëœ»í•œë‹¤ê³  í•´ì„œÂ `SPA`Â (Single Page Application)ë°©ì‹ì´ë¼ê³  ë¶ˆë¦½ë‹ˆë‹¤.

SPAëŠ” AJAX ë° HTML5ë¥¼ ì‚¬ìš©í•˜ì—¬ ì§€ì†ì ì¸ í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ì—†ì´ ìœ ì—°í•˜ê³  ë°˜ì‘ì´ ë¹ ë¥¸ ì›¹ì•±ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

SPAì—ì„œ ì²˜ìŒ í˜ì´ì§€ê°€ ë¡œë“œëœ í›„, ì„œë²„ì™€ì˜ ëª¨ë“  ìƒí˜¸ ì‘ìš©ì€Â `AJAX`Â í˜¸ì¶œì„ í†µí•´ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. ì´ëŸ¬í•œ AJAX í˜¸ì¶œì€ ì¼ë°˜ì ìœ¼ë¡œ JSON í˜•ì‹ìœ¼ë¡œ, ë§ˆí¬ì—…ì´ ì•„ë‹Œ ë°ì´í„°ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ì•±ì€Â `í˜ì´ì§€ë¥¼ ë‹¤ì‹œ ë¡œë“œí•˜ì§€ ì•Šê³  í˜ì´ì§€ë¥¼ ë™ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ê¸° ìœ„í•´ âœ¨JSON ë°ì´í„°ë¥¼ ì‚¬ìš©`í•©ë‹ˆë‹¤.

ì•„ë˜ ê·¸ë¦¼ì€ ë‘ ì ‘ê·¼ ë°©ì‹ì˜ ì°¨ì´ì ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.


![[SPA1.png]]



![[SPA2.jpg]]



![[SPA3.jpg]]









## SPAì˜ ì¥ì 

SPAëŠ” ì „ì²´ í˜ì´ì§€ë¥¼ ë‹¤ì‹œ ë¡œë“œí•˜ê³  ë‹¤ì‹œ ë Œë”ë§í•˜ëŠ” í˜¼ë€ìŠ¤ëŸ¬ìš´ ê³¼ì •ì´ ì—†ê¸° ë•Œë¬¸ì— ìì—°ìŠ¤ëŸ¬ìš´ í˜ì´ì§€ ì´ë™ê³¼ ì‚¬ìš©ì ê²½í—˜ì„ ì œê³µí•©ë‹ˆë‹¤. ì¦‰Â `ì„±ëŠ¥`ê³¼Â `ì‚¬ìš©ì ê²½í—˜ (UX)`Â ë‘ ë§ˆë¦¬ í† ë¼ë¥¼ ë‹¤ ì¡ëŠ” ì…ˆì´ì£ .

## SPAì™€ MPA ë¹„êµğŸ§

### í˜ì´ì§€ ë¡œë“œ ì†ë„

ì‚¬ìš©ìê°€ ì²˜ìŒ urlì— ì ‘ê·¼í•˜ë©´ ì›¹ í˜ì´ì§€ì— í•„ìš”í•œÂ `ëª¨ë“ `Â ì •ì  ë¦¬ì†ŒìŠ¤ë¥¼Â `í•œ ë²ˆì—`Â í´ë¼ì´ì–¸íŠ¸ë¡œ ë°›ì•„ì˜µë‹ˆë‹¤. í•˜ì§€ë§Œ ë°”ê¿” ë§í•˜ë©´ ì´ˆê¸° í˜ì´ì§€ ë¡œë”©ì´ MPA ë°©ì‹ì— ë¹„í•´ ì˜¤ë˜ ê±¸ë¦½ë‹ˆë‹¤.

ê·¸ ë‹¤ìŒë¶€í„°ëŠ” í˜ì´ì§€ë¥¼ ì „í™˜í•  ë•Œ ë‹¤ì‹œ ì„œë²„ë¡œ ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²ƒì´ ì•„ë‹Œ, JSì— ì˜í•´Â `í•„ìš”í•œ ë°ì´í„°`ë§ŒÂ `ë™ì `ìœ¼ë¡œ ë°›ì•„ì˜µë‹ˆë‹¤. ì¦‰ JSê°€Â `ë¼ìš°íŒ…`ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤. ë”°ë¼ì„œ ì´ˆê¸° ë¡œë”© ì´í›„ë¶€í„°ëŠ” SPAë°©ì‹ì´ MPA ë°©ì‹ë³´ë‹¤ í˜ì´ì§€ ë¡œë“œ ì†ë„ê°€ ë¹ ë¦…ë‹ˆë‹¤.

> #### ë¼ìš°íŒ…ì€ ë­”ê°€ìš”?
> 
> ì‚¬ìš©ìê°€ ìš”ì²­í•œ URLì— ë”°ë¥¸ í˜ì´ì§€ë¡œ ì „í™˜í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ë°ì´í„°ë¥¼ ì„œë²„ì— ìš”ì²­í•˜ê³ Â `í˜ì´ì§€ë¥¼ ì „í™˜`í•˜ëŠ” ì¼ë ¨ì˜ í–‰ìœ„ë¥¼ ë§í•©ë‹ˆë‹¤.

### SEO ê´€ì âš™ï¸

SPAëŠ” í˜ì´ì§€ ì „í™˜ì´ ë¹ ë¥´ë‹¤ëŠ” ì¥ì ì´ ìˆì§€ë§ŒÂ `SEOì— ë¶ˆë¦¬`í•˜ë‹¤ëŠ” ë‹¨ì ì´ ì¡´ì¬í•©ë‹ˆë‹¤. êµ¬ê¸€ ê²€ìƒ‰ì—”ì§„ì€ SPAë„ í¬ë¡¤ë§ì„ ì˜ í•˜ì§€ë§Œ êµ­ë‚´ ê²€ìƒ‰ì—”ì§„ì˜ ê²½ìš° SEOê°€ ì–´ë µìŠµë‹ˆë‹¤. SPAëŠ” í™”ë©´ì„ ë„ìš°ëŠ”ë° JSê°€ ì‚¬ìš©ë˜ê³  êµ¬ê¸€ ê²€ìƒ‰ì—”ì§„ì€ JSë¥¼ í•´ì„í•  ìˆ˜ ìˆì§€ë§Œ êµ­ë‚´ ê²€ìƒ‰ì—”ì§„ì€ JSë¥¼ í•´ì„í•˜ì§€ ëª»í•˜ê¸° ë•Œë¬¸ì´ì£ .

ì¼ë°˜ì ì¸ SPA ì•±ì„ ê²€ìƒ‰ ë¡œë´‡ ì…ì¥ì—ì„œ ë³´ë©´ ëª¨ë“  í˜ì´ì§€ì˜ ì†ŒìŠ¤ê°€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.

```html
<html>
<head>
  <title>Single Page Application</title>
  <link rel="stylesheet" href="app.css" type="text/css">
</head>
<body>
  <div id="app"></div>
  <script src="app.js"></script>
</body>
</html>
```

ì¦‰ ë¡œë”©ì‹œì ì—ì„œëŠ” ê²€ìƒ‰ ì—”ì§„ì´ ìƒ‰ì¸ì„ í•  ë§Œí•œ ì½˜í…ì¸ ê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²ƒì´ì£ .

ë°˜ë©´ì— 'SSR ë°©ì‹ìœ¼ë¡œ ë™ì‘í•˜ëŠ”' MPAëŠ” ì• ì´ˆì— ì™„ì„±ëœ í˜•íƒœì˜ HTMLì„ ì„œë²„ë¡œë¶€í„° ì „ë‹¬ë°›ê¸° ë•Œë¬¸ì— ê²€ìƒ‰ ì—”ì§„ì´ í˜ì´ì§€ë¥¼ í¬ë¡¤ë§ í•˜ê¸°ì— ì í•©í•˜ë¯€ë¡œ SEOì— ìœ ë¦¬í•©ë‹ˆë‹¤.

---

### MPA == SSR, SPA == CSRì´ë‹¤?âŒ

ë°”ë¡œ ìœ„ì—ì„œ 'SSR ë°©ì‹ìœ¼ë¡œ ë™ì‘í•˜ëŠ”' MPAëŠ” SEOì— ìœ ë¦¬í•˜ë‹¤ê³  ì–¸ê¸‰í–ˆìŠµë‹ˆë‹¤. 'SSR ë°©ì‹ìœ¼ë¡œ ë™ì‘í•˜ëŠ”'ì´ ì¤‘ìš”í•©ë‹ˆë‹¤. ê·¸ ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

í”íˆ MPA == SSR, SPA == CSR ì´ë ‡ê²Œ ìƒê°í•  ìˆ˜ë„ ìˆëŠ”ë° ê·¸ë ‡ì§€ ì•ŠìŠµë‹ˆë‹¤. Reactê°™ì€ JS ê¸°ë°˜ í”„ë ˆì„ì›Œí¬ í˜¹ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ë©´ ê¸°ë³¸ì ìœ¼ë¡œ í•˜ë‚˜ì˜ HTML, CSS, JS íŒŒì¼ì´ ë‚˜ì˜¤ê¸° ë•Œë¬¸ì— ìì—°ìŠ¤ë ˆ SPAì´ë©´ì„œ CSRì´ ë˜ëŠ” ê²ƒì´ê³ , ì´ë¥¼ SSRë¡œ êµ¬í˜„í•˜ë©´ í˜ì´ì§€ ë³„ë¡œ ë Œë”ë§ì„ ë”°ë¡œ í•˜ê¸° ë•Œë¬¸ì— MPAê°€ ë˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

MPAë©´ì„œ ê°™ì€ JS íŒŒì¼ì„ ë°›ê³  í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë Œë”ë§ì„ í•˜ê²Œ ë˜ë©´ MPA + CSRì´ ë˜ëŠ” ê²ƒì´ê³  SPAë©´ì„œ SSRì„ íƒí•˜ë©´ SSR + SPAê°€ ë©ë‹ˆë‹¤. ì›ë¦¬ë¥¼ ì´í•´í•˜ë©´ ì´ëŸ° ì‹ìœ¼ë¡œëŠ” ê¶í•©ì´ ì˜ ë§ì§€ ì•Šê¸° ë•Œë¬¸ì— MPA == SSR, SPA == CSRì´ ë§ˆì¹˜ ê³µì‹ì¸ ê²ƒ ì²˜ëŸ¼ ìƒê°ë˜ê¸°ë„ í•©ë‹ˆë‹¤.

ë”°ë¼ì„œ CSR ë°©ì‹ìœ¼ë¡œ ë™ì‘í•˜ëŠ” MPAì˜ ê²½ìš°ë„ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— MPAëŠ” ë¬´ì¡°ê±´ SEOì— ìœ ë¦¬í•˜ë‹¤ê³  í•´ë²„ë¦¬ë©´ ì´ëŠ” í‹€ë¦° ë§ì´ ë˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

Next.jsì™€ ê°™ì€ React ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•˜ë©´ í”íˆ CSRë¡œ ë™ì‘í•˜ëŠ” SPAë„ SSR ë°©ì‹ìœ¼ë¡œ ì„¤ê³„ê°€ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì—, SEO ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!

### **React ì‚¬ìš© ì‹œ SPA êµ¬í˜„ì˜ˆì‹œ**

ë‹¤ìŒì€ SPA(Single Page Application)ë¥¼ Reactë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬ì„±í•˜ëŠ” ê°„ë‹¨í•œ ì˜ˆì‹œì…ë‹ˆë‹¤.



![[SPA4.jpg]]



### Â  Â Â Java ScriptÂ ì‚¬ìš© SPA êµ¬í˜„ì˜ˆì‹œ

ë‹¤ìŒì€ SPA(Single Page Application)ë¥¼ ìˆœìˆ˜ Java Script(Vanilla Java Script)ë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬ì„±í•˜ëŠ” ê°„ë‹¨í•œ ì˜ˆì‹œì…ë‹ˆë‹¤

![[SPA5.jpg]]





## **ë°±ì—”ë“œ(Spring Legacy) ì„¤ì •**

### 2.1. **RESTful API ì»¨íŠ¸ë¡¤ëŸ¬ ë§Œë“¤ê¸°**

ê¸°ì¡´ JSP ë˜ëŠ” Thymeleaf ê¸°ë°˜ì˜ í˜ì´ì§€ ë Œë”ë§ì„ ì œê±°í•˜ê³ , RESTful APIë¥¼ ë°˜í™˜í•˜ë„ë¡ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.


```java
@RestController
@RequestMapping("/api")
public class UserController {

    @Autowired
    private UserService userService;

    @GetMapping("/users")
    public ResponseEntity<List<User>> getAllUsers() {
        List<User> users = userService.getAllUsers();
        return ResponseEntity.ok(users); // JSON í˜•íƒœë¡œ ë°˜í™˜
    }

    @PostMapping("/users")
    public ResponseEntity<User> createUser(@RequestBody User user) {
        User createdUser = userService.createUser(user);
        return ResponseEntity.status(HttpStatus.CREATED).body(createdUser);
    }
}

```


**íŠ¹ì§•**:

- `@RestController`: JSON ë°ì´í„°ë¥¼ ë°˜í™˜.
- `ResponseEntity`: HTTP ìƒíƒœì½”ë“œì™€ ë°ì´í„°ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì „ë‹¬.



### 2.2. **CORS(Cross-Origin Resource Sharing) ì„¤ì •**

SPAëŠ” ë°±ì—”ë“œì™€ í”„ëŸ°íŠ¸ì—”ë“œê°€ ì„œë¡œ ë‹¤ë¥¸ ë„ë©”ì¸ì—ì„œ ë™ì‘í•˜ê¸° ë•Œë¬¸ì— CORS ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.


```java
@Configuration
public class WebConfig implements WebMvcConfigurer {
    @Override
    public void addCorsMappings(CorsRegistry registry) {
        registry.addMapping("/api/**")
                .allowedOrigins("http://localhost:3000") // React/Vue ê°œë°œ ì„œë²„ ì£¼ì†Œ
                .allowedMethods("GET", "POST", "PUT", "DELETE", "OPTIONS")
                .allowCredentials(true);
    }
}

```



### 2.3. **ì •ì  ë¦¬ì†ŒìŠ¤ í•¸ë“¤ë§**

SPA ë¹Œë“œ ê²°ê³¼ë¬¼(`index.html`, `bundle.js` ë“±)ì„ Springì—ì„œ ì œê³µí•˜ë ¤ë©´, ì •ì  íŒŒì¼ì„ `src/main/resources/static`ì— ë°°ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.

1. ë¹Œë“œëœ í”„ëŸ°íŠ¸ì—”ë“œ íŒŒì¼ì„ ë³µì‚¬:
    
    - React: `npm run build` ì‹¤í–‰ í›„ ìƒì„±ëœ `build/` í´ë” ë‚´ìš©ì„ `src/main/resources/static`ì— ë³µì‚¬.
    - Vue.js: `npm run build` ì‹¤í–‰ í›„ `dist/` í´ë” ë‚´ìš©ì„ ë³µì‚¬.
2. ë©”ì¸ ìš”ì²­ ì²˜ë¦¬:
    
    - SPAì˜ ì§„ì…ì ì¸ `index.html`ì„ ë°˜í™˜í•˜ë„ë¡ ì„¤ì •.


```java
@Controller
public class HomeController {
    @GetMapping("/")
    public String index() {
        return "index"; // static/index.html ë°˜í™˜
    }
}

```



## 3. **í”„ëŸ°íŠ¸ì—”ë“œ(SPA) ì„¤ì •**

### 3.1. **React/Vue í”„ë¡œì íŠ¸ ìƒì„±**

React ë˜ëŠ” Vue.jsì™€ ê°™ì€ SPA í”„ë ˆì„ì›Œí¬ë¥¼ ì„ íƒí•˜ì—¬ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

#### React í”„ë¡œì íŠ¸ ìƒì„±:


```bash
npx create-react-app my-app
cd my-app
```



Vue.js í”„ë¡œì íŠ¸ ìƒì„±:



```bash
npm install -g @vue/cli
vue create my-app
cd my-app
```


### 3.2. **API í˜¸ì¶œ ì½”ë“œ ì‘ì„±**

SPAì—ì„œ ë°±ì—”ë“œ APIë¥¼ í˜¸ì¶œí•˜ì—¬ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.

#### React ì˜ˆì œ:


```js
import React, { useEffect, useState } from "react";

function App() {
  const [users, setUsers] = useState([]);

  useEffect(() => {
    fetch("http://localhost:8080/api/users")
      .then(response => response.json())
      .then(data => setUsers(data));
  }, []);

  return (
    <div>
      <h1>User List</h1>
      <ul>
        {users.map(user => (
          <li key={user.id}>{user.name}</li>
        ))}
      </ul>
    </div>
  );
}

export default App;
```


Vue.js ì˜ˆì œ:


```js
<template>
  <div>
    <h1>User List</h1>
    <ul>
      <li v-for="user in users" :key="user.id">{{ user.name }}</li>
    </ul>
  </div>
</template>

<script>
export default {
  data() {
    return {
      users: []
    };
  },
  mounted() {
    fetch("http://localhost:8080/api/users")
      .then(response => response.json())
      .then(data => {
        this.users = data;
      });
  }
};
</script>
```



### 3.3. **SPA ë¹Œë“œ ë° ë°°í¬**

1. **í”„ëŸ°íŠ¸ì—”ë“œ ë¹Œë“œ**:
    
    - React:
- 

```bash
npm run build
```


- ê²°ê³¼ë¬¼ì´ `build/` í´ë”ì— ìƒì„±ë©ë‹ˆë‹¤.
- Vue.js

```bash
npm run build
```


- - ê²°ê³¼ë¬¼ì´ `dist/` í´ë”ì— ìƒì„±ë©ë‹ˆë‹¤.
- **Spring Legacyë¡œ ë°°í¬**:
    
    - ë¹Œë“œëœ íŒŒì¼(`build/` ë˜ëŠ” `dist/` ë‚´ìš©)ì„ Springì˜ `src/main/resources/static`ì— ë³µì‚¬.





### SPAì—ì„œ JWTë¥¼ í™œìš©í•œ ì¸ì¦ êµ¬í˜„

JWT(JSON Web Token)ëŠ” í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ ê°„ ì¸ì¦ì„ ê°„ë‹¨í•˜ê³  ì•ˆì „í•˜ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ë°©ì‹ìœ¼ë¡œ, íŠ¹íˆ SPAì™€ ê°™ì´ ìƒíƒœ ë¹„ì €ì¥(stateless) ë°©ì‹ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì í•©í•©ë‹ˆë‹¤.

---

## **JWT ì¸ì¦ì˜ ê¸°ë³¸ íë¦„**

1. **ì‚¬ìš©ì ë¡œê·¸ì¸**: ì‚¬ìš©ìê°€ ì•„ì´ë””/ë¹„ë°€ë²ˆí˜¸ë¡œ ë¡œê·¸ì¸ ìš”ì²­.
2. **JWT ë°œê¸‰**: ì„œë²„ëŠ” ì¸ì¦ ì •ë³´ë¥¼ ê²€ì¦í•˜ê³  JWTë¥¼ ìƒì„±í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ì— ë°˜í™˜.
3. **í´ë¼ì´ì–¸íŠ¸ ì €ì¥**: í´ë¼ì´ì–¸íŠ¸ëŠ” JWTë¥¼ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ë˜ëŠ” ì¿ í‚¤ì— ì €ì¥.
4. **ìš”ì²­ ì‹œ í† í° ì „ì†¡**: í´ë¼ì´ì–¸íŠ¸ëŠ” ì´í›„ API ìš”ì²­ë§ˆë‹¤ JWTë¥¼ `Authorization` í—¤ë”ì— ë‹´ì•„ ì „ì†¡.
5. **ì„œë²„ ê²€ì¦**: ì„œë²„ëŠ” ìˆ˜ì‹ ëœ JWTì˜ ìœ íš¨ì„±ì„ ê²€ì¦í•˜ê³  ìš”ì²­ì„ ì²˜ë¦¬.

---

## **Springì—ì„œ JWT ì¸ì¦ êµ¬í˜„**

### 1. **í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€**

Spring í”„ë¡œì íŠ¸ì˜ `pom.xml`ì— JWT ê´€ë ¨ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.


pom.xml
```xml
<dependency>
    <groupId>io.jsonwebtoken</groupId>
    <artifactId>jjwt-api</artifactId>
    <version>0.11.5</version>
</dependency>
<dependency>
    <groupId>io.jsonwebtoken</groupId>
    <artifactId>jjwt-impl</artifactId>
    <version>0.11.5</version>
    <scope>runtime</scope>
</dependency>
<dependency>
    <groupId>io.jsonwebtoken</groupId>
    <artifactId>jjwt-jackson</artifactId>
    <version>0.11.5</version>
    <scope>runtime</scope>
</dependency>

```


### 2. **JWT ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤ ì‘ì„±**

JWT ìƒì„±, ê²€ì¦, íŒŒì‹± ë“±ì„ ë‹´ë‹¹í•˜ëŠ” ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.


```java
import io.jsonwebtoken.*;
import io.jsonwebtoken.security.Keys;

import java.security.Key;
import java.util.Date;

public class JwtUtil {

    private static final String SECRET_KEY = "my-secret-key-for-jwt-my-secret-key"; // 32ì ì´ìƒ
    private static final long EXPIRATION_TIME = 1000 * 60 * 60; // 1ì‹œê°„

    private static final Key key = Keys.hmacShaKeyFor(SECRET_KEY.getBytes());

    public static String generateToken(String username) {
        return Jwts.builder()
                .setSubject(username)
                .setIssuedAt(new Date())
                .setExpiration(new Date(System.currentTimeMillis() + EXPIRATION_TIME))
                .signWith(key, SignatureAlgorithm.HS256)
                .compact();
    }

    public static Claims validateToken(String token) throws JwtException {
        return Jwts.parserBuilder()
                .setSigningKey(key)
                .build()
                .parseClaimsJws(token)
                .getBody();
    }
}
```


### 3. **JWT ë°œê¸‰ ì—”ë“œí¬ì¸íŠ¸ ìƒì„±**

ì‚¬ìš©ìê°€ ë¡œê·¸ì¸í•˜ë©´ JWTë¥¼ ë°œê¸‰í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.


```java
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

@RestController
@RequestMapping("/api/auth")
public class AuthController {

    @PostMapping("/login")
    public ResponseEntity<?> login(@RequestBody LoginRequest loginRequest) {
        // ì‚¬ìš©ì ì¸ì¦ (ì—¬ê¸°ì„  ê°„ë‹¨íˆ í•˜ë“œì½”ë”©)
        if ("user".equals(loginRequest.getUsername()) && "password".equals(loginRequest.getPassword())) {
            String token = JwtUtil.generateToken(loginRequest.getUsername());
            return ResponseEntity.ok(new LoginResponse(token));
        } else {
            return ResponseEntity.status(401).body("Invalid credentials");
        }
    }

    public static class LoginRequest {
        private String username;
        private String password;

        // Getter, Setter
        public String getUsername() { return username; }
        public void setUsername(String username) { this.username = username; }
        public String getPassword() { return password; }
        public void setPassword(String password) { this.password = password; }
    }

    public static class LoginResponse {
        private String token;

        public LoginResponse(String token) {
            this.token = token;
        }

        public String getToken() {
            return token;
        }
    }
}
```


### 4. **JWT ì¸ì¦ í•„í„° ì¶”ê°€**

JWTë¥¼ ê²€ì¦í•˜ëŠ” Spring Security í•„í„°ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.


```java
import org.springframework.security.core.context.SecurityContextHolder;
import org.springframework.security.web.authentication.WebAuthenticationDetailsSource;
import org.springframework.stereotype.Component;

import javax.servlet.FilterChain;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;

@Component
public class JwtAuthenticationFilter extends OncePerRequestFilter {

    @Override
    protected void doFilterInternal(HttpServletRequest request,
                                    HttpServletResponse response,
                                    FilterChain filterChain) throws ServletException, IOException {
        String authHeader = request.getHeader("Authorization");
        if (authHeader != null && authHeader.startsWith("Bearer ")) {
            String token = authHeader.substring(7);
            try {
                Claims claims = JwtUtil.validateToken(token);
                // ì—¬ê¸°ì„œ í•„ìš”í•œ ê¶Œí•œì´ë‚˜ ì •ë³´ë¥¼ Contextì— ì¶”ê°€ ê°€ëŠ¥
                UsernamePasswordAuthenticationToken authentication =
                        new UsernamePasswordAuthenticationToken(claims.getSubject(), null, null);
                authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));
                SecurityContextHolder.getContext().setAuthentication(authentication);
            } catch (JwtException e) {
                response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);
                response.getWriter().write("Invalid token");
                return;
            }
        }
        filterChain.doFilter(request, response);
    }
}
```


### 5. **Spring Security ì„¤ì •**

JWT í•„í„°ë¥¼ Spring Securityì— ì¶”ê°€í•©ë‹ˆë‹¤.


```java
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.security.authentication.AuthenticationManager;
import org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;
import org.springframework.security.crypto.password.PasswordEncoder;
import org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;

@Configuration
@EnableWebSecurity
public class SecurityConfig extends WebSecurityConfigurerAdapter {

    private final JwtAuthenticationFilter jwtAuthenticationFilter;

    public SecurityConfig(JwtAuthenticationFilter jwtAuthenticationFilter) {
        this.jwtAuthenticationFilter = jwtAuthenticationFilter;
    }

    @Override
    protected void configure(HttpSecurity http) throws Exception {
        http.csrf().disable()
                .authorizeRequests()
                .antMatchers("/api/auth/**").permitAll() // ì¸ì¦ ì—†ì´ ì ‘ê·¼ ê°€ëŠ¥
                .anyRequest().authenticated()
                .and()
                .addFilterBefore(jwtAuthenticationFilter, UsernamePasswordAuthenticationFilter.class);
    }

    @Bean
    public PasswordEncoder passwordEncoder() {
        return new BCryptPasswordEncoder();
    }
}
```


security-context.xml


```xml
<beans:beans xmlns="http://www.springframework.org/schema/security"
             xmlns:beans="http://www.springframework.org/schema/beans"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://www.springframework.org/schema/security
                                 http://www.springframework.org/schema/security/spring-security.xsd
                                 http://www.springframework.org/schema/beans
                                 http://www.springframework.org/schema/beans/spring-beans.xsd">

    <!-- ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”ë¥¼ ìœ„í•œ PasswordEncoder -->
    <beans:bean id="passwordEncoder" class="org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder"/>

    <!-- Custom JWT Authentication Filter -->
    <beans:bean id="jwtAuthenticationFilter" class="com.example.JwtAuthenticationFilter"/>

    <!-- Spring Security Configuration -->
    <http pattern="/api/auth/**" security="none"/> <!-- ì¸ì¦ ì—†ì´ ì ‘ê·¼ ê°€ëŠ¥ -->

    <http>
        <csrf disabled="true"/>
        <intercept-url pattern="/**" access="isAuthenticated()"/> <!-- ì¸ì¦ í•„ìš” -->

        <!-- JWT í•„í„°ë¥¼ UsernamePasswordAuthenticationFilter ì „ì— ì¶”ê°€ -->
        <custom-filter ref="jwtAuthenticationFilter" before="USERNAME_PASSWORD_AUTHENTICATION_FILTER"/>
    </http>

</beans:beans>
```


### 2. **í•µì‹¬ ë³€í™˜ ë‚´ìš©**

1. **PasswordEncoder ë“±ë¡**

```java
@Bean
public PasswordEncoder passwordEncoder() {
    return new BCryptPasswordEncoder();
}
```


```xml
<beans:bean id="passwordEncoder" class="org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder"/>
```


```java
@Configuration
public class JwtAuthenticationFilter extends OncePerRequestFilter { ... }
```


```xml
<beans:bean id="jwtAuthenticationFilter" class="com.example.JwtAuthenticationFilter"/>
```

- **HTTP ì„¤ì •**
    
    - `csrf().disable()` â†’ `<csrf disabled="true"/>`
    - `antMatchers("/api/auth/**").permitAll()` â†’ `<http pattern="/api/auth/**" security="none"/>`
    - `addFilterBefore(jwtAuthenticationFilter, UsernamePasswordAuthenticationFilter.class)` â†’ `<custom-filter ref="jwtAuthenticationFilter" before="USERNAME_PASSWORD_AUTHENTICATION_FILTER"/>`
- **Authenticated URL ì„¤ì •**

```java
.anyRequest().authenticated()
```


```xml
<intercept-url pattern="/**" access="isAuthenticated()"/>
```



### 3. **XML ì„¤ì • ì ìš©**

Spring Security XMLì„ ì‚¬ìš©í•˜ë ¤ë©´ `web.xml` ë˜ëŠ” `dispatcher-servlet.xml`ì—ì„œ í•´ë‹¹ Security ì„¤ì •ì„ ë“±ë¡í•©ë‹ˆë‹¤.

#### ì˜ˆ: `web.xml`ì— Security ì„¤ì • ì¶”ê°€


```xml
<web-app>
    <!-- Spring Security ì„¤ì • -->
    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
</web-app>
```


ì˜ˆ: `dispatcher-servlet.xml`ì— Security ì„¤ì • ì°¸ì¡°


```xml
<import resource="classpath:security-config.xml"/>

```



### 6. **í´ë¼ì´ì–¸íŠ¸(SPA)ì—ì„œ JWT í™œìš©**

í”„ëŸ°íŠ¸ì—”ë“œì—ì„œ ë¡œê·¸ì¸ í›„ JWTë¥¼ ì €ì¥í•˜ê³ , API ìš”ì²­ ì‹œ í—¤ë”ì— ì¶”ê°€í•©ë‹ˆë‹¤.

#### ë¡œê·¸ì¸ ìš”ì²­ (React/Vue ì˜ˆì‹œ):

```js
fetch("http://localhost:8080/api/auth/login", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ username: "user", password: "password" }),
})
    .then(res => res.json())
    .then(data => {
        localStorage.setItem("token", data.token); // JWT ì €ì¥
    });
```


API ìš”ì²­:

```js
fetch("http://localhost:8080/api/users", {
    headers: {
        Authorization: `Bearer ${localStorage.getItem("token")}`,
    },
})
    .then(res => res.json())
    .then(data => console.log(data));
```









---
ì¶œì²˜ - https://velog.io/@dikum98/SPA-Single-Page-Application%EC%9D%B4%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80%EC%9A%94

