



```
docker run -d --name="tomcat-test" -p 8080:8080 tomcat:9.0.84
```


war파일을 복사 내가 저장해둔 위치를 지정

```
docker cp C:\Project\CrawlerTest\target/CrawlerTest-1.0-SNAPSHOT.war tomcat-test:/usr/local/tomcat/webapps/ROOT.war
```


mysql 설치

\<password> 부분에 내가 원하는 값 입력
\--name에 컨테이너 이름 입력 mysql-container로 설정 해놈
```
docker run --name mysql-container -e MYSQL_ROOT_PASSWORD=<password> -d -p 3307:3306 mysql:latest
```


mysql
```
docker run --network=mynetwork --name likesql -e MYSQL_ROOT_PASSWORD=1234 -d -p 3307:3306 mysql:latest
```


tomcat
```
docker run --network=mynetwork --name tomcat-test -d -p 8080:8080 tomcat:9.0.84
```

network
```
docker network create mynetwork
```



컨테이너 각자 생성시 네트워크를 묶어줘야지만 사용 가능
만약 이미 컨테이너를 만들었을 경우
```
docker network connect my-mynetwork tomcat
docker network connect my-mynetwork likesql

```

이런식으로 네트워크 설정 가능



database.xml로 변경 해줘야함
이런식으로 같은 네트워크에 있는 컨테이너명으로 변경
    <property name="jdbcUrl" value="jdbc:mysql://likesql/test"></property> 
```xml
<?xml version="1.0" encoding="UTF-8"?>  
<beans xmlns="http://www.springframework.org/schema/beans"  
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">  
  
  
    <!-- mybatis 사용하기 위해 객체 생성 -->  
  
    <!-- Connection -->    <bean class="com.zaxxer.hikari.HikariDataSource" id="dataSource">  
        <property name="username" value="root"></property>  
        <property name="password" value="1234"></property>  
        <property name="jdbcUrl" value="jdbc:mysql://likesql/test"></property>  
        <property name="driverClassName" value="com.mysql.cj.jdbc.Driver" />  
  
        <property name="maximumPoolSize" value="5" />  
                <property name="minimumIdle" value="5" />  
                <property name="connectionTimeout" value="30000" />  
                <property name="idleTimeout" value="600000" />  
                <property name="maxLifetime" value="1800000" />  
  
    </bean>  
  
    <bean class="org.mybatis.spring.SqlSessionFactoryBean" id="sqlSessionFactoryBean">  
  
        <property name="dataSource" ref="dataSource"></property>  
        <property name="configLocation" value="classpath:database/config/MybatisConfig.xml"></property>  
        <property name="mapperLocations" value="classpath:database/mappers/*Mapper.xml"></property>  
    </bean>  
  
    <bean class="org.mybatis.spring.SqlSessionTemplate" id="sqlSession">  
        <constructor-arg name="sqlSessionFactory" ref="sqlSessionFactoryBean"></constructor-arg>  
    </bean>  
  
</beans>
```





## Docker-Compose
docker-compse.yml이 있는 디렉토리로 이동
이거 같은 경우에는 docker-compose.yml 파일이 저 위치에 있기 때문에 저기로 이동 
다른곳에 있으면 다른 곳으로 이동해야함
![[Docker-Compose명령어11.png]]
![[Docker-Compose명령어6.png]]



docker-compose up 실행(이미 만들어 놓은 yml파일이 있을경우)
![[Docker-Compose명령어7.png]]

로그와 함께 실행
이때 나오고 싶을 경우 ctrl + c 입력
![[Docker-Compose명령어8.png]]

도커 지우고 싶을 때
docker-compose down

![[Docker-Compose명령어9.png]]

docker-compose up -d  도커 컴포즈 백그라운드 실행

![[Docker-Compose명령어10.png]]


결과
도커 컴포즈 안에 3개의 컨테이너 생성
![[Docker-Compose명령어12.png]]

![[Docker-Compose명령어13.png]]



# 도커 




